"use strict";class Whatsapp{constructor({title:title="Â¿Necesitas ayuda?",description:description="Chatea con nosotros por Whatsapp",agents:agents=[],time:time=[]}){this.title=title,this.description=description,this.agents=agents,this.time=time,this.isEnabled(this.time)&&this.render()}getAgent({cta:cta="",hours:hours="",name:name="",phone:phone=""}){return`<a href="#" data-phone="${phone}" data-title="${name}" class="wa-w_a_a js-owaa" title="${name} ${phone}">\n\t\t\t<span class="wa-w_a_a_i"><span class="icon-customerContact"></span></span>\n\t\t\t<span class="wa-w_a_a_c">\n\t\t\t\t<span class="a_t">${name}</span>\n\t\t\t\t<span class="a_s">${hours}</span>\n\t\t\t\t<span class="a_c">${cta}<span class="a_c_i"></span></span>\n\t\t\t</span>\n\t\t</a>`}getHeader(){return`<header class="wa-w_h">\n\t\t\t<span class="wa-w_h_t">${this.title}</span>\n\t\t\t<span class="wa-w_h_s">\n\t\t\t\t<span class="wa-w_h_i"></span>\n\t\t\t\t${this.description}\n\t\t\t</span>\n\t\t</header>`}getStyles(){return fetch("./style.min.css").then(res=>res.text()).then(style=>`<style>${style}</style>`)}isEnabled(time=[]){if(!time.length)return!0;const date=new Date,[_start,_end]=[time[0].split(":"),time[1].split(":")];return!(date.getTime()>=new Date(date.getFullYear(),date.getMonth(),date.getDate(),+_end[0],+_end[1]).getTime())&&!(date.getTime()<=new Date(date.getFullYear(),date.getMonth(),date.getDate(),+_start[0],+_start[1]).getTime())}async render(){if(!this.agents.length)return;let agents="";for(const agent of this.agents)agents+=this.getAgent(agent);document.body.insertAdjacentHTML("beforeend",`${await this.getStyles()}\n\t\t\t<div class="wa-w">\n\t\t\t\t${this.getHeader()}\n\t\t\t\t<section class="wa-w_a">${agents}</section>\n\t\t\t\t<button class="wa-w_b" title="${this.title}"></button>\n\t\t\t</div>`),document.querySelector(".wa-w_b").addEventListener("click",()=>{"dataLayer"in window&&dataLayer.push({event:"ga_event",category:"Widget WhatsApp",action:"Click WhatsApp",label:"Click Icono"}),document.querySelector(".wa-w").classList.toggle("open")}),document.querySelector(".js-owaa").addEventListener("click",e=>{e.preventDefault(),this.openAgent(e.currentTarget.dataset)})}openAgent({phone:phone="",title:title=""}){"dataLayer"in window&&dataLayer.push({event:"ga_event",category:"Widget WhatsApp",action:"Click WhatsApp",label:title}),window.open(`https://wa.me/${phone.replace(/ /g,"").replace("+","")}`,"_blank")}}window.whatsapp=Whatsapp;
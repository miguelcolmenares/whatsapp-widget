/*! whatsapp-widget - v3.0.0 - 2020-12-17 */
"use strict";class WhatsappWidget{constructor({title:t="Â¿Necesitas ayuda?",description:e="Chatea con nosotros por Whatsapp",agents:a=[]}){this.title=t,this.description=e,this.agents=a||[],this.render()}getHeader(){return`<header class="wa-w_h">\n\t\t\t<span class="wa-w_h_t">${this.title}</span>\n\t\t\t<span class="wa-w_h_s">\n\t\t\t\t<span class="wa-w_h_i wa-w-i wa-w-i-w"></span>\n\t\t\t\t${this.description}\n\t\t\t</span>\n\t\t</header>`}getStyles(){return fetch("./dist/css/whatsapp-widget.css").then(t=>t.text()).then(t=>`<style>${t}</style>`)}async render(){if(!this.agents.length)return;let t="";for(const e of this.agents){const a=new WhatsappAgent(e);if(!a.isEnabled())return;t+=a.render()}document.body.insertAdjacentHTML("beforeend",`${await this.getStyles()}\n\t\t\t<div class="wa-w">\n\t\t\t\t${this.getHeader()}\n\t\t\t\t<section class="wa-w_a">${t}</section>\n\t\t\t\t<button class="wa-w_b" title="${this.title}"><span class="wa-w-i wa-w-i-w"></span></button>\n\t\t\t</div>`),document.querySelector(".wa-w_b").addEventListener("click",()=>{"dataLayer"in window&&dataLayer.push({event:"ga_event",category:"Widget WhatsApp",action:"Click WhatsApp",label:"Click Icono"}),document.querySelector(".wa-w").classList.toggle("open")}),document.querySelector(".js-owaa").addEventListener("click",t=>{t.preventDefault(),this.openAgent(t.currentTarget.dataset)})}openAgent({phone:t="",title:e=""}){"dataLayer"in window&&dataLayer.push({event:"ga_event",category:"Widget WhatsApp",action:"Click WhatsApp",label:e}),window.open(`https://wa.me/${t.replace(/ /g,"").replace("+","")}`,"_blank")}}class WhatsappAgent{constructor({cta:t="",hours:e="",name:a="",phone:s="",schedule:n=[]}){this.cta=t,this.description=e,this.name=a,this.phone=s,this.schedule=n||[]}get isEnabled(){const t=new Date;if(!this.schedule.length||!this.schedule[t.getDay()].length)return!1;const[e,a]=[this.schedule[t.getDay()][0].split(":"),this.schedule[t.getDay()][1].split(":")],[s,n]=[new Date(t.getFullYear(),t.getMonth(),t.getDate()<10?"0"+t.getDate():t.getDate(),+e[0],+e[1]),new Date(t.getFullYear(),t.getMonth(),t.getDate()<10?"0"+t.getDate():t.getDate(),+a[0],+a[1])];return t.getTime()>=s.getTime()&&t.getTime()<=n.getTime()}render(){return`<a href="#" data-phone="${this.phone}" data-title="${this.name}" class="wa-w_a_a js-owaa" title="${this.name} ${this.phone}">\n\t\t<span class="wa-w_a_a_i"><span class="wa-w-i wa-w-i-cc"></span></span>\n\t\t<span class="wa-w_a_a_c">\n\t\t\t<span class="a_t">${this.name}</span>\n\t\t\t<span class="a_s">${this.description}</span>\n\t\t\t<span class="a_c">${this.cta}<span class="a_c_i wa-w-i wa-w-i-e"></span></span>\n\t\t</span>\n\t</a>`}}window.whatsapp=WhatsappWidget;
//# sourceMappingURL=whatsapp-widget.js.map